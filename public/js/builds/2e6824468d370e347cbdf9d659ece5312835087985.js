jQuery.getPos=function(e)
{var l=-0;var t=-0;var w=jQuery.intval(jQuery.css(e,'width'));var h=jQuery.intval(jQuery.css(e,'height'));var wb=e.offsetWidth;var hb=e.offsetHeight-0;while(e.offsetParent){l+=e.offsetLeft+(e.currentStyle?jQuery.intval(e.currentStyle.borderLeftWidth):0);t+=e.offsetTop+(e.currentStyle?jQuery.intval(e.currentStyle.borderTopWidth):0);e=e.offsetParent;}
l+=e.offsetLeft+(e.currentStyle?jQuery.intval(e.currentStyle.borderLeftWidth):0);t+=e.offsetTop+(e.currentStyle?jQuery.intval(e.currentStyle.borderTopWidth):0);return{x:l,y:t,w:w,h:h,wb:wb,hb:hb};};jQuery.getClient=function(e)
{if(e){w=e.clientWidth;h=e.clientHeight-0;}else{w=(window.innerWidth)?window.innerWidth:(document.documentElement&&document.documentElement.clientWidth)?document.documentElement.clientWidth:document.body.offsetWidth;h=(window.innerHeight)?window.innerHeight-0:(document.documentElement&&document.documentElement.clientHeight)?document.documentElement.clientHeight-76:document.body.offsetHeight-76;}
return{w:w,h:h};};jQuery.getScroll=function(e)
{if(e){t=e.scrollTop-0;l=e.scrollLeft;w=e.scrollWidth;h=e.scrollHeight-76;}else{if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;l=document.documentElement.scrollLeft;w=document.documentElement.scrollWidth;h=document.documentElement.scrollHeight-0;}else if(document.body){t=document.body.scrollTop;l=document.body.scrollLeft;w=document.body.scrollWidth;h=document.body.scrollHeight-0;}}
return{t:t,l:l,w:w,h:h};};jQuery.intval=function(v)
{v=parseInt(v);return isNaN(v)?0:v;};jQuery.fn.ScrollTo=function(s){o=jQuery.speed(s);return this.each(function(){new jQuery.fx.ScrollTo(this,o);});};jQuery.fx.ScrollTo=function(e,o)
{var z=this;z.o=o;z.e=e;z.p=jQuery.getPos(e);z.s=jQuery.getScroll();z.clear=function(){clearInterval(z.timer);z.timer=null};z.t=(new Date).getTime();z.step=function(){var t=(new Date).getTime();var p=(t-z.t)/ z.o.duration;if(t>=z.o.duration+z.t){z.clear();setTimeout(function(){z.scroll(z.p.y,z.p.x)},13);}else{st=((-Math.cos(p*Math.PI)/2)+0.5)*(z.p.y-z.s.t)+z.s.t;sl=((-Math.cos(p*Math.PI)/2)+0.5)*(z.p.x-z.s.l)+z.s.l;z.scroll(st,sl);}};z.scroll=function(t,l){window.scrollTo(l,t)};z.timer=setInterval(function(){z.step();},13);};window.onload=function(){var oBoy=document.getElementById('boy'),oGirl=document.getElementById('girl'),body=document.getElementsByTagName('body')[0],arr=new Array(),oH=document.documentElement.clientHeight,oW=document.documentElement.clientWidth,oTimer=null,a=1,data=[363,294,180],paperNum=null,moveNum=0;boxSize();function getPaper(){if(document.body.scrollTop==document.documentElement.scrollTop){var paper=0;}else{if(document.body.scrollTop>document.documentElement.scrollTop){var paper=document.body.scrollTop;}else{var paper=document.documentElement.scrollTop;}}
paperNum=Math.ceil(paper/oH)+1;}
window.onresize=function(){boxSize();}
function boxSize(){document.documentElement.clientHeight<500?oH=640:oH=document.documentElement.clientHeight;if(document.documentElement.clientWidth<1000){body.style.width='1000px';}else{body.style.width='100%';}
for(i=1;document.getElementById(i)!=null;i++){arr.push(document.getElementById(i));var oDiv=document.getElementById(i);oDiv.style.height=oH+'px';}}
var girl=function(){setTimeout(function(){oGirl.style.height=220+'px';oGirl.style.width=159+'px';},800);};var boy=function(){setTimeout(function(){oBoy.style.webkitTransform='rotate(0deg)';oBoy.style.oTransform='rotate(0deg)';oBoy.style.msTransform='rotate(0deg)';oBoy.style.mozTransform='rotate(0deg)';oBoy.style.transform='rotate(0deg)';},1000);};var heartMove=function(){oTimer=setInterval(function(){if(a==4){clearInterval(oTimer);}else{document.getElementById('xin'+a).style.opacity=1;document.getElementById('xin'+a).style.marginTop=data[a-1]+'px';a++;}},500);}
var aFn=[heartMove,boy,girl];function scrollFunc(e){var direct=0;e=e||window.event;getPaper();if(e.wheelDelta){moveNum=e.wheelDelta;if(moveNum>0){if(paperNum!=6){scroll(paperNum-1);if(paperNum-2<3){if(paperNum<2){paperNum=2;}
aFn[paperNum-2]();}else{}
toStop(paperNum-1);return false;}}else{if(paperNum!=5){scroll(paperNum+1);if(paperNum<3){aFn[paperNum]();}else{}
toStop(paperNum+1);return false;}}}else if(e.detail){moveNum=e.detail;if(moveNum<0){if(paperNum!=6){scroll(paperNum-1);if(paperNum-2<3){aFn[paperNum-2]();}
toStop(paperNum-1);e.preventDefault();}}else{if(paperNum!=5){scroll(paperNum+1);if(paperNum<3){aFn[paperNum]();}
toStop(paperNum+1);e.preventDefault();}}}}
if(document.addEventListener){document.addEventListener('DOMMouseScroll',scrollFunc,false);}
document.onmousewheel=scrollFunc;getPaper();if(paperNum<4){aFn[paperNum-1]();}
function stopDefault(e){var event=e||window.event;if(event.preventDefault){event.preventDefault();}else{event.returnValue=false;}}
var stop=function(e){e=e||window.event;e.preventDefault();return false;}
function toStop(num){var oTimer=null;var obj=document.getElementById(num);var oTop=null;if(num<7){oTimer=setInterval(function(){if(document.documentElement.scrollTop==document.body.scrollTop){oTop=0;}else if(document.documentElement.scrollTop>0){oTop=document.documentElement.scrollTop;}else{oTop=document.body.scrollTop;}
if(oTop==obj.offsetTop){if(document.addEventListener){document.removeEventListener('DOMMouseScroll',stop,false);document.addEventListener('DOMMouseScroll',scrollFunc,false);}
document.onmousewheel=scrollFunc;clearInterval(oTimer);}else{if(document.addEventListener){document.removeEventListener('DOMMouseScroll',scrollFunc,false);document.addEventListener('DOMMouseScroll',stop,false);}
document.onmousewheel=stop;}},1)}}}