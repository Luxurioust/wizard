function getStyle(obj,attr){if(obj.currentStyle){return obj.currentStyle[attr];}else{return getComputedStyle(obj,false)[attr];}}
function getById(id){return document.getElementById(id);}
function getByClass(obj,tagName,sClass){var aEle=obj.getElementsByTagName(tagName);var i=0;var aResult=[];for(i=0;i<aEle.length;i++){var aClassName=aEle[i].className.split(' ');for(j=0;j<aClassName.length;j++){if(aClassName[j]==sClass){aResult.push(aEle[i]);break;}}}
return aResult;}
function addClass(obj,sClass){if(obj.className==''){obj.className=sClass;}else{var arrClassName=obj.className.split(' ');if(inarr(arrClassName,sClass)==-1){obj.className+=(' '+sClass);}}
function inarr(arr,str){var tmp=-1;for(var i=0;i<arr.length;i++){if(arr[i]==str){tmp=i;}}
return tmp;}}
function removeClass(obj,sClass){if(obj.className!=''){var arrClassName=obj.className.split(' ');var _index=inarr(arrClassName,sClass);if(_index!=-1){arrClassName.splice(_index,1);obj.className=arrClassName.join(' ');}}
function inarr(arr,str){var tmp=-1;for(var i=0;i<arr.length;i++){if(arr[i]==str){tmp=i;}}
return tmp;}}
function check_browser(){var str='';if(window.navigator.userAgent.search(/firefox/i)!=-1){str='ff';}else if(window.navigator.userAgent.search(/chrome/i)!=-1){str='chrome';}else if(window.navigator.userAgent.search(/msie 9/i)!=-1){str='IE9';}else if(window.navigator.userAgent.search(/msie 8/i)!=-1){str='IE8';}else if(window.navigator.userAgent.search(/msie 7/i)!=-1){str='IE7';}else if(window.navigator.userAgent.search(/msie 6/i)!=-1){str='IE6';}else{str='';}
return str;}
function startMove(obj,ojson,iSpeed,type,fn){clearInterval(obj.timer);var icur=0;obj.timer=setInterval(function(){var bbool=true;for(var attr in ojson){var iTarget=Math.ceil(ojson[attr]);if(attr=='opacity'){icur=Math.round(css(obj,'opacity')*100);}else{icur=parseInt(css(obj,attr));}
if(type==2){iSpeed=(iTarget-icur)/8;iSpeed=iSpeed>0?Math.ceil(iSpeed):Math.floor(iSpeed);}
if(icur!=iTarget){bbool=false;if(attr=='opacity'){obj.style.opacity=(icur+iSpeed)/100;obj.style.filter="alpha(opacity="+(icur+iSpeed)+")";}else{obj.style[attr]=icur+iSpeed+'px';}}}
if(bbool){clearInterval(obj.timer);fn&&fn.call(obj);}},30);function css(obj,attr){if(obj.currentStyle){return obj.currentStyle[attr];}else{return getComputedStyle(obj,false)[attr];}}}
function timeMove(obj,json,times,type,fn){var iCur={};for(var attr in json){iCur[attr]=0;if(attr=='opacity'){iCur[attr]=Math.round(getStyle(obj,attr)*100);}else{iCur[attr]=parseInt(getStyle(obj,attr));}}
clearInterval(obj.timer);var startTime=now();obj.timer=setInterval(function(){var changeTime=now();var t=times-Math.max(0,(startTime+times-changeTime));for(var attr in json){var value=Tween[type](t,iCur[attr],json[attr]-iCur[attr],times);if(attr=='opacity'){obj.style.opacity=value/100;obj.style.filter='alpha(opacity='+value+')';}else{obj.style[attr]=value+'px';}}
if(t==times){clearInterval(obj.timer);if(fn){fn.call(obj);}}},13);function getStyle(obj,attr){if(obj.currentStyle){return obj.currentStyle[attr];}else{return getComputedStyle(obj,false)[attr];}}
function now(){return new Date().getTime();}
var Tween={linear:function(t,b,c,d){return c*t/d+b;},easeIn:function(t,b,c,d){return c*(t/=d)*t+b;},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeBoth:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}
return-c/2*((--t)*(t-2)-1)+b;},easeInStrong:function(t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutStrong:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeBothStrong:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}
return-c/2*((t-=2)*t*t*t-2)+b;},elasticIn:function(t,b,c,d,a,p){if(t===0){return b;}
if((t /=d)==1){return b+c;}
if(!p){p=d*0.3;}
if(!a||a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}
return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},elasticOut:function(t,b,c,d,a,p){if(t===0){return b;}
if((t /=d)==1){return b+c;}
if(!p){p=d*0.3;}
if(!a||a<Math.abs(c)){a=c;var s=p / 4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}
return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},elasticBoth:function(t,b,c,d,a,p){if(t===0){return b;}
if((t /=d/2)==2){return b+c;}
if(!p){p=d*(0.3*1.5);}
if(!a||a<Math.abs(c)){a=c;var s=p/4;}
else{var s=p/(2*Math.PI)*Math.asin(c/a);}
if(t<1){return-0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}
return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b;},backIn:function(t,b,c,d,s){if(typeof s=='undefined'){s=1.70158;}
return c*(t/=d)*t*((s+1)*t-s)+b;},backOut:function(t,b,c,d,s){if(typeof s=='undefined'){s=3.70158;}
return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},backBoth:function(t,b,c,d,s){if(typeof s=='undefined'){s=1.70158;}
if((t /=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}
return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},bounceIn:function(t,b,c,d){return c-Tween['bounceOut'](d-t,0,c,d)+b;},bounceOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b;}
return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b;},bounceBoth:function(t,b,c,d){if(t<d/2){return Tween['bounceIn'](t*2,0,c,d)*0.5+b;}
return Tween['bounceOut'](t*2-d,0,c,d)*0.5+c*0.5+b;}}}
function t_startMove(obj,attr,iTarget,fn){var iSpeed=0;var height=0;clearInterval(obj.timer);obj.timer=setInterval(function(){iSpeed+=(iTarget-height)/5;iSpeed*=0.7;if(Math.abs(iSpeed)<1&&Math.abs(iTarget-height)<1){clearInterval(obj.timer);obj.style[attr]=iTarget+'px';if(fn){fn();}}else{height+=iSpeed;obj.style[attr]=height+'px';}},30);}
function getAbPos(obj){var pos={left:0,top:0}
while(obj){pos.left+=obj.offsetLeft;pos.top+=obj.offsetTop;obj=obj.offsetParent;}
return pos;}
function ajax(method,url,data,tfn){var xhr=null;if(window.XMLHttpRequest){xhr=new XMLHttpRequest();}else{xhr=new ActiveXObject('Microsoft.XMLHTTP');}
if(method=='get'&&data){url+='?'+data+'&'+new Date().getTime();}
xhr.open(method,url,true);if(method=='get'){xhr.send();}else{xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');xhr.send(data);}
xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200){tfn&&tfn(xhr.responseText);}else{alert("出错了："+xhr.status);}}}}
function getRandom(lowernum,uppernum){var allnum=uppernum-lowernum+1;return Math.floor(Math.random()*allnum+lowernum);}
function getUrlargus(){var queryStr=location.search.length>0?location.search.substring(1):"";var args={};var items=queryStr.length>0?queryStr.split("&"):[];var item=null;var name=null;var value=null;var len=items.length;for(var i=0;i<len;i++){item=items[i].split("=");name=decodeURIComponent(item[0]);value=decodeURIComponent(item[1]);args[name]=value;}
return args;}
function checkNIEPlugins(kname){var len=navigator.plugins.length;for(var i=0;i<len;i++){if(navigator.plugins[i].name.toLowerCase().indexOf(kname)>-1){return true;}}
return false;}
function checkIEPlugins(kname){try{new ActiveXObject(kname);return true;}catch(e){return false;}}
function bind(obj,evname,fn,bool){if(obj.addEventListener){obj.addEventListener(evname,fn,bool);}else{obj.attachEvent('on'+evname,function(){fn.call(obj);});}}
function removebind(obj,evname,fn,bool){if(obj.removeEventListener){obj.removeEventListener(evname,fn,bool);}else{obj.detachEvent('on'+evname,function(){fn.call(obj);});}}
function setCookie(key,value,time){var oDate=new Date();oDate.setDate(oDate.getDate()+time);document.cookie=key+"="+encodeURI(value)+";expires="+oDate.toGMTString();}
function getCookie(key){var arr1=document.cookie.split('; ');for(var i=0;i<arr1.length;i++){var arr2=arr1[i].split('=');if(arr2[0]==key){return decodeURI(arr2[1]);}}
return null;}
function Trim(str,is_global){var result;result=str.replace(/(^\s+)|(\s+$)/g,"");if(is_global.toLowerCase()=="g")
result=result.replace(/\s/g,"");return result;}var colorConfig=['#e64150','#5cd5d5','#8acd47','#ffcc00','#a036a0'];+(function(){var global_pic_path='';var pic_wrap=getById('pre_pic_wrap');var context=pic_wrap.getContext('2d');var pic_list=getById('pre_pic_list');var btn_list=getById('pre_btn_list');var btns=btn_list.getElementsByTagName('div');var bgcolor_arr=['#fff','#5d6368','#87151c','#cf061d','#d94220','#e6830a','#f3b819','#d0d0d1','#8c959c','#b5051b','#da5037','#efa913','#f0bc38','#7b7c7e','#acb7be','#b03c3a','#e79273','#e5816f','#f9ce4e','#f5ce65','#000000','#cfdce3','#c0675c','#f3bea1','#f6cb73','#f6dd91','#ffec00','#88b40b','#51951b','#1e7721','#5ca68a','#459da1','#2e70b4','#fff04a','#b0c519','#75a842','#558d41','#80b8a0','#70b0b3','#5c87c2','#fff37e','#dcde50','#ede223','#bed49d','#abc295','#c3dcce','#bad7d8','#adc0df','#2b88c9','#24236f','#253884','#721e69','#d00d69','#4c3c31','#663d1c','#30ade3','#493d81','#4d5397','#88447f','#da5f98','#645643','#7a4d2a','#78c3eb','#71639e','#7576b0','#a26e9e','#e791b9','#907765','#9d6d39','#cee8f7','#9a8fbb','#a09fca','#bf9cbe','#f4cedf','#beae8b','#b88d53'];var head_pic_num;var eyebrows_pic_num;var ears_pic_num;var eyes_pic_num;var nose_pic_num;var mouth_pic_num;var hair_pic_num;var bgcolor_pic_num;var global_tou;var global_er;var global_mei;var global_yan;var global_zui;var global_bi;var global_hair;var global_bgcolor;var change_photo=getById('change_photo');var mask=getById('mask');var pre_content=getById('pre_content');var pre_close=getById('pre_close');var checkbg=getById('checkbg');var g_b_btns=checkbg.getElementsByTagName('a');var check_close=getById('check_close');change_photo.onclick=function(){mask.style.display=checkbg.style.display='block';makeHeight(checkbg,250);};pre_close.onclick=function(){mask.style.display=pre_content.style.display='none';clearImgList();};check_close.onclick=function(){mask.style.display=checkbg.style.display='none';clearImgList();};for(var gb=1;gb<g_b_btns.length;gb++){g_b_btns[gb].onclick=function(){if(this.id=="../assets/images/preInfoEdit/girl/"){global_pic_path="../assets/images/preInfoEdit/girl/";main(26,1,8,11,1,1,1,0);head_pic_num=28;eyebrows_pic_num=23;ears_pic_num=5;eyes_pic_num=28;nose_pic_num=28;mouth_pic_num=27;hair_pic_num=21;bgcolor_pic_num=82;global_tou=26;global_er=1;global_mei=8;global_yan=11;global_zui=1;global_bi=1;global_hair=1;global_bgcolor=0;}else{global_pic_path="../assets/images/preInfoEdit/boy/";main(1,1,1,1,1,1,1,0);head_pic_num=28;eyebrows_pic_num=28;ears_pic_num=6;eyes_pic_num=27;nose_pic_num=27;mouth_pic_num=27;hair_pic_num=24;bgcolor_pic_num=82;global_tou=1;global_er=1;global_mei=1;global_yan=1;global_zui=1;global_bi=1;global_hair=1;global_bgcolor=0;}
checkbg.style.display='none';pre_content.style.display='block';createImgList('head',28);};}
var save_pic=getById('save_pic');var portait=getById('portait');save_pic.onclick=function(){var dataURL=pic_wrap.toDataURL("image/png");portait.value=dataURL;mask.style.display=pre_content.style.display='none';clearImgList();var head_pic=getById('head_pic');head_pic.src=dataURL;}
var check_school=getById('check_school');var vote_school=getById('vote-school');var provinces=getById('provinces');var provinces_arr=provinces.getElementsByTagName('a');var school_wrap=getById('school_wrap');var school_str=getById('school_str');provinces.onclick=function(ev){var ev=ev||window.event;var target=ev.target||ev.srcElement;var to_ken=getById('province_token').value;$.post(postuniversity,{'_token':to_ken,'province':target.innerHTML},function(jdata){for(var j=school_wrap.children.length-1;j>=0;j--){school_wrap.removeChild(school_wrap.children[j]);}
for(var i=0;i<jdata.length;i++){var a=document.createElement('a');a.innerHTML=jdata[i];a.onclick=function(){check_school.innerHTML=school_str.value=this.innerHTML;mask.style.display=vote_school.style.display='none';};school_wrap.appendChild(a);}});};var vs_pass=getById('vs-pass');check_school.onclick=function(){makeHeight(vote_school,484);mask.style.display=vote_school.style.display='block';};vs_pass.onclick=function(){mask.style.display=vote_school.style.display='none';};var check_constellation=getById('check_constellation');var con_Popup=getById('con-Popup');var cons_arr=con_Popup.getElementsByTagName('li');var constellation=getById('constellation');var con_pass=getById('con-pass');for(var i=0;i<cons_arr.length;i++){(function(i){cons_arr[i].onclick=function(){constellation.value=i+1;mask.style.display=con_Popup.style.display='none';getById('con_img').src=this.children[0].src;check_constellation.innerHTML=this.children[1].innerHTML;};})(i);}
check_constellation.onclick=function(){makeHeight(con_Popup,380);mask.style.display=con_Popup.style.display='block';};con_pass.onclick=function(){mask.style.display=con_Popup.style.display='none';};var check_tag=getById('check_tag');var tag_Popup=getById('tag-Popup');var tag_arr=tag_Popup.getElementsByTagName('li');var tag_pass=getById('tag-pass');check_tag.onclick=function(){makeHeight(tag_Popup,380);mask.style.display=tag_Popup.style.display='block';};tag_pass.onclick=function(){mask.style.display=tag_Popup.style.display='none';};window.onscroll=function(){makeHeight(pre_content,530);makeHeight(checkbg,250);makeHeight(vote_school,484);makeHeight(con_Popup,380);makeHeight(tag_Popup,380);};var clickon=getById('clickon');var pillars_auto=getById('pillars_auto');var pillars_fixed=getById('pillars_fixed');var days=pillars_auto.getElementsByTagName('span')[0];var instr=getById('instr');clickon.onclick=function(){$.post(post_renew_url,{'_token':token},function(jdata){if(jdata['success']){pillars_auto.style.width=pillars_auto.offsetWidth+10+'px';days.innerHTML=parseInt(days.innerHTML)+1;}});if(parseInt(days.innerHTML)%50==0){}}
clickon.onmouseover=function(){instr.style.display='block';}
clickon.onmouseout=function(){instr.style.display='none';}
function makeHeight(obj,height){var top=document.documentElement.scrollTop||document.body.scrollTop;mask.style.top=top+'px';var client_height=document.documentElement.clientHeight;var h=height;var end_top=Math.ceil((client_height-h)/ 2)+top;obj.style.top=end_top+'px';}
btn_list.onclick=function(ev){var ev=ev||window.event;var target=ev.target||ev.srcElement;if(target.title){for(var i=0;i<btns.length;i++){removeClass(btns[i],'active');}
addClass(target.parentNode,'active');clearImgList();switch(target.title){case'head':createImgList('head',head_pic_num);break;case'eyebrows':createImgList('eyebrows',eyebrows_pic_num);break;case'ears':createImgList('ears',ears_pic_num);break;case'eyes':createImgList('eyes',eyes_pic_num);break;case'nose':createImgList('nose',nose_pic_num);break;case'mouth':createImgList('mouth',mouth_pic_num);break;case'hair':createImgList('hair',hair_pic_num);break;case'bgcolor':createImgList('bgcolor',bgcolor_pic_num);break;default:break}}}
pic_list.onclick=function(ev){var ev=ev||window.event;var target=ev.target||ev.srcElement;if(target.title){var pic_list_arr=pic_list.getElementsByTagName('div');for(var i=0;i<pic_list_arr.length;i++){removeClass(pic_list_arr[i],'active');}
addClass(target.parentNode,'active');var target_arr=target.title.split('_');context.clearRect(0,0,pic_wrap.width,pic_wrap.height);switch(target_arr[0]){case'head':global_tou=target_arr[1];main(target_arr[1],global_er,global_mei,global_yan,global_zui,global_bi,global_hair,global_bgcolor);break;case'eyebrows':global_mei=target_arr[1];main(global_tou,global_er,target_arr[1],global_yan,global_zui,global_bi,global_hair,global_bgcolor);break;case'ears':global_er=target_arr[1];main(global_tou,target_arr[1],global_mei,global_yan,global_zui,global_bi,global_hair,global_bgcolor);break;case'eyes':global_yan=target_arr[1];main(global_tou,global_er,global_mei,target_arr[1],global_zui,global_bi,global_hair,global_bgcolor);break;case'nose':global_bi=target_arr[1];main(global_tou,global_er,global_mei,global_yan,global_zui,target_arr[1],global_hair,global_bgcolor);break;case'mouth':global_zui=target_arr[1];main(global_tou,global_er,global_mei,global_yan,target_arr[1],global_bi,global_hair,global_bgcolor);break;case'hair':global_hair=target_arr[1];main(global_tou,global_er,global_mei,global_yan,global_zui,global_bi,target_arr[1],global_bgcolor);break;case'bgcolor':global_bgcolor=target_arr[1];main(global_tou,global_er,global_mei,global_yan,global_zui,global_bi,global_hair,target_arr[1]);break;default:break}}}
function main(tou,er,mei,yan,zui,bi,hair,bgcolor){var tou_img1=new Image();tou_img1.src=global_pic_path+'head/'+tou+'.png';tou_img1.onload=function(){context.drawImage(tou_img1,50,30,120,171);var er_img1=new Image();er_img1.src=global_pic_path+'ears/'+er+'.png';er_img1.onload=function(){if(global_pic_path=='./images/preInfoEdit/girl/'){context.drawImage(er_img1,33,104,155,50);}else{context.drawImage(er_img1,26,104,168,50);}
var mei_img1=new Image();mei_img1.src=global_pic_path+'eyebrows/'+mei+'.png';mei_img1.onload=function(){context.drawImage(mei_img1,68,80,80,28.6);var yan_img1=new Image();yan_img1.src=global_pic_path+'eyes/'+yan+'.png';yan_img1.onload=function(){context.drawImage(yan_img1,68,100,80,28.6);var zui_img1=new Image();zui_img1.src=global_pic_path+'mouth/'+zui+'.png';zui_img1.onload=function(){context.drawImage(zui_img1,80,152,60,30);var bi_img1=new Image();bi_img1.src=global_pic_path+'nose/'+bi+'.png';bi_img1.onload=function(){context.drawImage(bi_img1,92,124,35,30);var hair_img1=new Image();hair_img1.src=global_pic_path+'hair/'+hair+'.png';hair_img1.onload=function(){if(global_pic_path=='../assets/images/preInfoEdit/girl/'){context.drawImage(hair_img1,20,0,178,222);}else{context.drawImage(hair_img1,20,0,178,125);}}}}}}}}
context.fillStyle=bgcolor_arr[bgcolor];context.fillRect(0,0,pic_wrap.width,pic_wrap.height);}
function createImgList(src_str,num){if(src_str=='bgcolor'){for(var i=0;i<bgcolor_arr.length;i++){var div=document.createElement('div');addClass(div,'pic_img');if(i==0){addClass(div,'active');}
div.style.background=bgcolor_arr[i];var img=document.createElement('section');img.style.width='52px';img.style.height='51px';img.title=src_str+'_'+i;div.appendChild(img);pic_list.appendChild(div);}}else{var start;if(src_str=='hair'){start=0;}else{start=1;}
for(var i=start;i<=num;i++){var div=document.createElement('div');addClass(div,'pic_img');if(i==1){addClass(div,'active');}
var img=document.createElement('img');img.src=global_pic_path+src_str+'/all/'+i+'.png';img.title=src_str+'_'+i;div.appendChild(img);pic_list.appendChild(div);}}}
function clearImgList(){var div=pic_list.getElementsByTagName('div');for(var i=div.length-1;i>=0;i--){pic_list.removeChild(div[i]);}}
function getById(id){return document.getElementById(id);}
function addClass(obj,sClass){if(obj.className==''){obj.className=sClass;}else{var arrClassName=obj.className.split(' ');if(inarr(arrClassName,sClass)==-1){obj.className+=(' '+sClass);}}
function inarr(arr,str){var tmp=-1;for(var i=0;i<arr.length;i++){if(arr[i]==str){tmp=i;}}
return tmp;}}
function removeClass(obj,sClass){if(obj.className!=''){var arrClassName=obj.className.split(' ');var _index=inarr(arrClassName,sClass);if(_index!=-1){arrClassName.splice(_index,1);obj.className=arrClassName.join(' ');}}
function inarr(arr,str){var tmp=-1;for(var i=0;i<arr.length;i++){if(arr[i]==str){tmp=i;}}
return tmp;}}})();var aLi=document.getElementById('tag-list-r').getElementsByTagName('li');for(var i=0;i<aLi.length;i++){if(i%4==0){aLi[i].className='red';aLi[i].style.marginLeft='0px';}else if(i%4==1){aLi[i].className='yellow';}else if(i%4==2){aLi[i].className='green';}else if(i%4==3){aLi[i].className='blue';}}
cArr(aLi);var tag_str=getById('tag_str');var tagArr=[];var admin_tagArr=[];var tag_end=getById('tag_end');var tag_td=getById('tag_td');admin_tagArr=tag_str.value.split(',');for(var u=0;u<admin_tagArr.length;u++){for(var w=0;w<aLi.length;w++){if(admin_tagArr[u]==w+1){fnY(aLi[w],w+1,aLi[w].children[0].innerHTML);var s=(w+1)+'-'+aLi[w].children[0].innerHTML;for(var j=tag_td.children.length-2;j>=0;j--){tag_td.removeChild(tag_td.children[j]);}
for(var i=0;i<tagArr.length;i++){var span=document.createElement('span');var ii=document.createElement('i');ii.innerHTML=tagArr[i].split('-')[1];var em=document.createElement('em');em.innerHTML='×';em.onclick=function(){for(var m=0;m<aLi.length;m++){var sr=this.parentNode.getAttribute('data-num');if(sr==aLi[m].getAttribute('data-num')){fnY(aLi[m],sr.split('-')[0],sr.split('-')[1]);tag_td.removeChild(this.parentNode);tag_str.value=admin_tagArr.toString();}}}
span.appendChild(ii);span.appendChild(em);span.setAttribute("data-num",tagArr[i].toString());tag_td.insertBefore(span,tag_td.children[0]);}}}}
tag_end.onclick=function(){tag_str.value=admin_tagArr.toString();for(var j=tag_td.children.length-2;j>=0;j--){tag_td.removeChild(tag_td.children[j]);}
for(var i=0;i<tagArr.length;i++){var span=document.createElement('span');var ii=document.createElement('i');ii.innerHTML=tagArr[i].split('-')[1];var em=document.createElement('em');em.innerHTML='×';em.onclick=function(){for(var m=0;m<aLi.length;m++){var sr=this.parentNode.getAttribute('data-num');if(sr==aLi[m].getAttribute('data-num')){fnY(aLi[m],sr.split('-')[0],sr.split('-')[1],1);tag_td.removeChild(this.parentNode);tag_str.value=admin_tagArr.toString();}}}
span.appendChild(ii);span.appendChild(em);span.setAttribute("data-num",tagArr[i].toString());tag_td.insertBefore(span,tag_td.children[0]);var tag_Popup=getById('tag-Popup');mask.style.display=tag_Popup.style.display='none';}};function cArr(arr){for(var i=0;i<arr.length;i++){arr[i].index=i+1;(function(k){arr[k].onmousedown=function(){aa=this;arr[k].onmouseout=function(){aa=this;}}
arr[k].onmouseup=function(){aa=this;}
arr[k].onclick=function(){aa=this;fnY(aa,this.index,this.children[0].innerHTML,1);}})(i);}}
function fnY(aa,num,str,b){var aaImg=aa.getElementsByTagName('img')[0];var sss=num+'-'+str;if(aa.getAttribute("data-num")){aaImg.style.width=0;aaImg.style.height=0;aaImg.style.margin='14px 14px 14px 0';aa.setAttribute("data-num",'');arrRemove(admin_tagArr,num);arrRemove(tagArr,sss);}else{aaImg.style.width='20px';aaImg.style.height='20px';aaImg.style.margin='4px 4px 4px 0';aa.setAttribute("data-num",sss);tagArr.push(sss);if(b){admin_tagArr.push(num);}}}
function arrRemove(arr,val){for(var i=0;i<arr.length;i++){if(arr[i]==val){var index=arr.getArrayIndex(val);arr.splice(index,1);}}}
Array.prototype.getArrayIndex=function(value){var index=-1;for(var i=0;i<this.length;i++){if(this[i]==value){index=i;break;}}
return index;}